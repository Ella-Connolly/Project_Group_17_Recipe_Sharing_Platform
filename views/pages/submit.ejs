<% include('../partials/header') %>
<%- include('../partials/nav') %>

<main class="container">
  <h2>Upload a Recipe</h2>

  <div class="upload-instructions">
    <h3>How to submit a recipe</h3>
    <ol>
      <li>Use a clear, descriptive title (e.g., "Garlic Butter Shrimp").</li>
      <li>List ingredients one per line, or separated by commas. Include measurements (e.g., "1 tbsp olive oil").</li>
      <li>Write clear step-by-step instructions. Keep each step short.</li>
      <li>Select a cuisine (e.g., "Italian", "Mexican") for easier discovery.</li>
      <li>Upload a photo (optional) â€” make sure image files are &lt; 5MB.</li>
      <li>Tag dietary labels like "vegan" or "gluten-free" in the tags field (comma-separated).</li>
    </ol>
  </div>

  <!-- Correct form action -->
  <form id="recipeForm" method="post" action="/recipes" enctype="multipart/form-data">
    <label for="title">Title</label>
    <input id="title" name="title" required />

    <label for="cuisine">Cuisine</label>
    <input id="cuisine" name="cuisine" />

    <label for="ingredients">Ingredients</label>
    <textarea id="ingredients" name="ingredients" rows="4" required></textarea>

    <label for="instructions">Instructions</label>
    <textarea id="instructions" name="instructions" rows="6" required></textarea>

    <label for="tags">Tags</label>
    <input id="tags" name="tags" placeholder="vegan, gluten-free" />

    <label for="difficulty">Difficulty</label>
    <select id="difficulty" name="difficulty">
      <option value="">Select difficulty</option>
      <option value="Easy">Easy</option>
      <option value="Medium">Medium</option>
      <option value="Hard">Hard</option>
    </select>

    <label for="cook_time">Cook Time (minutes)</label>
    <input id="cook_time" name="cook_time" type="number" min="0" />

    <label for="prep_time">Prep Time (minutes)</label>
    <input id="prep_time" name="prep_time" type="number" min="0" />

    <label for="servings">Servings</label>
    <input id="servings" name="servings" type="number" min="1" />

    <label for="images">Image URL (optional)</label>
    <input <input type="file" name="images" multiple>

    <button type="submit">Submit Recipe</button>
  </form>
</main>

<script>
  // Simple client-side validation
  document.getElementById('recipeForm').addEventListener('submit', function(e) {
    const title = document.getElementById('title').value.trim();
    const ingredients = document.getElementById('ingredients').value.trim();

    if (!title) {
      alert('Please enter a recipe title.');
      e.preventDefault();
      return;
    }

    if (!ingredients) {
      alert('Please enter at least one ingredient.');
      e.preventDefault();
      return;
    }
  });
</script>

<% include('../partials/footer') %>
